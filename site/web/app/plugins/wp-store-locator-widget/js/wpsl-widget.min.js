jQuery(document).ready(function(e){function t(){var t,o,s=Number(wpslWidgetSettings.geoLocationTimout);navigator.geolocation&&(o=setInterval(function(){e(".wpsl-icon-direction").toggleClass("wpsl-active-icon")},600),navigator.geolocation.getCurrentPosition(function(s){var n;void 0!==s&&(t=new google.maps.LatLng(s.coords.latitude,s.coords.longitude),clearInterval(o),n=t,(new google.maps.Geocoder).geocode({latLng:n},function(t,o){t=function(e){var t,o,s,n,i=wpslWidgetSettings.filterPattern;if("formatted_address"==i)s=e[0].formatted_address;else{for(n=e[0].address_components.length,o=0;o<n;o++)t=e[0].address_components[o].types,i.indexOf(t[0])>-1&&(s=e[0].address_components[o].long_name);s||(s=e[0].formatted_address)}return s}(t),o==google.maps.GeocoderStatus.OK&&e("#wpsl-widget-search").val(t)}))},function(t){switch(t.code){case t.PERMISSION_DENIED:alert(wpslGeolocationErrors.denied);break;case t.POSITION_UNAVAILABLE:alert(wpslGeolocationErrors.unavailable);break;case t.TIMEOUT:alert(wpslGeolocationErrors.timeout);break;default:alert(wpslGeolocationErrors.generalError)}clearInterval(o),e(".wpsl-icon-direction").removeClass("wpsl-active-icon")},{maximumAge:6e4,timeout:s,enableHighAccuracy:!0}))}e("#wpsl-widget-search").length&&"undefined"!=typeof wpslWidgetSettings&&(1==wpslWidgetSettings.autoComplete&&function(){var t,o={};void 0===wpslWidgetSettings.geocodeComponents||e.isEmptyObject(wpslWidgetSettings.geocodeComponents)||(o.componentRestrictions=wpslWidgetSettings.geocodeComponents);t=document.getElementById("wpsl-widget-search"),new google.maps.places.Autocomplete(t,o)}(),1!=wpslWidgetSettings.autoLocate||e(".wpsl-search").hasClass("wpsl-widget")||t()),e(".wpsl-icon-direction").on("click",function(){t()}),e("#wpsl-widget-submit").bind("click",function(t){if(!e.trim(e("#wpsl-widget-search").val()).length)return e("#wpsl-widget-search").addClass("wpsl-error").focus(),!1;e("#wpsl-widget-search").removeClass("wpsl-error")})});